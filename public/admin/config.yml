# Use DecapBridge classic auth (required)
backend:
  name: git-gateway
  repo: crossinguard/crossinguard-dev
  branch: main
  identity_url: https://auth.decapbridge.com/sites/72ffc87e-ca50-45fe-8138-8a1b1db3e3d9
  gateway_url: https://gateway.decapbridge.com
  squash_merges: true

  # See who did what (optional)
  commit_messages:
    create: Create {{collection}} “{{slug}}” - {{author-name}} <{{author-login}}> via DecapBridge
    update: Update {{collection}} “{{slug}}” - {{author-name}} <{{author-login}}> via DecapBridge
    delete: Delete {{collection}} “{{slug}}” - {{author-name}} <{{author-login}}> via DecapBridge
    uploadMedia: Upload “{{path}}” - {{author-name}} <{{author-login}}> via DecapBridge
    deleteMedia: Delete “{{path}}” - {{author-name}} <{{author-login}}> via DecapBridge
    openAuthoring: Message {{message}} - {{author-name}} <{{author-login}}> via DecapBridge

# Use local files instead of GitHub during local dev
# bun run cms
local_backend: true

# Better Decap + Bridge logo (optional)
logo_url: https://decapbridge.com/decapcms-with-bridge.svg

# Add site links in Decap CMS (optional)
site_url: https://crossinguard.dev

publish_mode: editorial_workflow

media_folder: "src/assets"
public_folder: "@assets"

collections:
  # SITE SETTINGS
  - label: "Site Settings"
    name: "settings"
    files:
      - label: "Site Information"
        name: "site"
        file: "src/data/site.json"
        editor:
          preview: false
        fields:
          - label: "Website Metadata"
            name: "metadata"
            widget: "object"
            hint: "Website metadata is primary used behind the scenes to help with search engine optimization (SEO)"
            fields:
              - {
                  label: "Title",
                  name: "title",
                  widget: "string",
                  hint: "Primary title of the website. Appears within the label on the browser tab",
                }
              - {
                  label: "Description",
                  name: "description",
                  widget: "text",
                  hint: "Primary description of the website. Appears in the footer and is used as a fallback description for all pages",
                }
              - {
                  label: "URL",
                  name: "url",
                  widget: "string",
                  hint: "Current full domain of the website. This should only be updated if the domain name changes",
                }
          - label: "Owner Information (Footer)"
            name: "owner"
            widget: "object"
            hint: "Information about the website owner. Appears in the footer"
            fields:
              - { label: "Name", name: "name", widget: "string" }
              - { label: "Tagline", name: "tagline", widget: "string" }
              - { label: "Email", name: "email", widget: "string" }
              - label: "Social"
                name: "social"
                widget: "list"
                fields:
                  - { label: "Name", name: "name", widget: "string" }
                  - { label: "URL", name: "url", widget: "string" }
                  - {
                      label: "Icon",
                      name: "icon",
                      widget: "string",
                      hint: "Select any icon from phosphoricons.com. Enter as 'ph:icon-name'",
                    }
      - label: "Navigation"
        name: "nav"
        file: "src/data/nav.json"
        editor:
          preview: false
        fields:
          - label: "Navigation Links"
            label_singular: "Navigation Link"
            name: "nav"
            widget: "list"
            hint: "Drag to reorder. These appear in the site header."
            field:
              label: "Page"
              name: "page"
              widget: "relation"
              collection: "pages"
              value_field: "{{slug}}"
              search_fields: ["title"]
              display_fields: ["title"]

  # CONTENT COLLECTIONS
  - label: "Pages"
    name: "pages"
    folder: "src/content/pages"
    create: true
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Description", name: "description", widget: "text" }
      - { label: "Body", name: "body", widget: "markdown" }
  - label: "Posts"
    name: "posts"
    folder: "src/content/posts"
    create: true
    media_folder: "../../assets/posts"
    public_folder: "@assets/posts"
    fields:
      - {
          label: "Title",
          name: "title",
          widget: "string",
          hint: "Appears as the main heading and as the label on the browser tab",
        }
      - {
          label: "Description",
          name: "description",
          widget: "text",
          hint: "Short summary shown in post previews and search results",
        }
      - {
          label: "Publish Date",
          name: "pubDate",
          widget: "datetime",
          date_format: "YYYY-MM-DD",
          picker_utc: true,
          hint: "Identifies when this post was first published and provides sorting on the main posts page",
        }
      - {
          label: "Updated Date",
          name: "updatedDate",
          widget: "datetime",
          date_format: "YYYY-MM-DD",
          picker_utc: true,
          required: false,
          hint: "Idenitifies when significant changes were made to this post after publishing",
        }
      - {
          label: "Cover Image",
          name: "image",
          widget: "image",
          required: false,
          hint: "Displayed at the top of the post and in previews",
        }
      - {
          label: "Cover Image Alt Text",
          name: "imageAlt",
          widget: "string",
          required: false,
          hint: "Describes the image for screen readers and accessibility. If a cover image is used, alt text is not optional",
        }
      - {
          label: "Tags",
          name: "tags",
          widget: "list",
          required: false,
          hint: "Keywords to help readers find related posts. Enter as comma separated values",
        }
      - {
          label: "Related Posts",
          name: "relatedPosts",
          widget: "relation",
          collection: "posts",
          value_field: "{{slug}}",
          search_fields: ["title"],
          display_fields: ["title"],
          multiple: true,
          required: false,
          hint: "Directs to other posts relevant to this one",
        }
      - {
          label: "Draft post?",
          name: "isDraft",
          widget: "boolean",
          required: false,
          hint: "Drafts are hidden from the live site",
        }
      - {
          label: "Featured post?",
          name: "isFeatured",
          widget: "boolean",
          required: false,
          hint: "Featured posts appear larger at the top of the posts page",
        }
      - {
          label: "Body",
          name: "body",
          widget: "markdown",
          buttons:
            [
              bold,
              italic,
              code,
              link,
              heading-two,
              heading-three,
              heading-four,
              heading-five,
              heading-six,
              quote,
              bulleted-list,
              numbered-list,
            ],
          hint: "The main content of your post",
        }

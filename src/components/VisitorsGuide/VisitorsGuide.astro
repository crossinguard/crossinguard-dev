---
import { getCollection } from "astro:content";
import nav from "@data/nav.json";

const allPages = await getCollection("pages");
const navPages = nav.nav
    .map((slug) => allPages.find((page) => page.id === slug))
    .filter((page): page is NonNullable<typeof page> => Boolean(page));
---

<section class="visitor-guide prose">
    <header class="header">
        <h2 class="title">Visitor's Guide</h2>
        <p>This site is my digital home.</p>
        <p>
            A place that I control with no ads, no tracking, no algorithms, and
            no trend chasing.
        </p>
        <p>
            Like a pair of cargo shorts, I offer a 100% <em
                >"I am not trendy"</em
            > guarantee.
        </p>
    </header>
    {
        navPages.map((page) => (
            <div class="stack prose">
                <h3>
                    <a href={`/${page.id}`}>{page.data.title}</a>
                </h3>
                <p>{page.data.description}</p>
            </div>
        ))
    }
</section>

<style>
    .visitor-guide {
        padding-block: var(--space-xl);
    }

    .header {
        text-align: center;
    }

    .stack {
        padding: var(--space-s);
        max-width: 45ch;
        margin-inline: auto;
        border: 2px solid var(--color-dark);

        p {
            margin: 0;
        }
    }

    h3 {
        font-size: var(--size-2);
    }

    a {
        transition: color 0.2s ease-in;

        &:hover {
            color: var(--color-primary-shade);
        }
    }
</style>
